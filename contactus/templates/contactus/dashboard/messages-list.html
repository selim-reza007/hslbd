{% extends "my_admin\base.html" %}

{% block title %}
Requested Messages
{% endblock title %}

{% block content %}
<div class="">
    <p class="h2 bg-success text-white text-center py-2 rounded mb-3">List of Received Messages</p>

  <!-- Example Data Table -->
  <div class="table-responsive mt-4">
    
    <table class="table">
      <thead>
        <tr>
          <th>Sender</th>
          <th>Email address</th>
          <th>Received Date</th>
          <th>Status</th>
          <th>Action Taken</th>
          <th>Open Message</th>
        </tr>
      </thead>
      <tbody>

        {% for message in messages %}
        <tr class="{% if message.messageRead == False %}bg-light{% endif %}">
          <td>{% if message.firstName %}{{ message.firstName }} {% else %}Not provided{% endif %} {{ message.lastName }}</td>
          <td>{{ message.email }}</td>
          <td>{{ message.receivedDate }}</td>
          <td>
            {% if message.messageRead == False %}
              <span class="badge bg-warning">Not Viewed</span>
            {% else %}
              <span class="text-dark">Viewed</span>
            {% endif %}
          </td>
          <td>
            {% if message.status == True %}
              <span class="fw-normal text-success">Replied</span>
            {% else %}
            <span class="badge bg-danger">Not Replied</span>
            {% endif %}
          </td>
          <td class="">
            <a class="btn btn-sm btn-success" title="Click to open message" href="{% url 'contactus:details-msg' slug=message.id %}"><i class="fa-solid fa-unlock"></i> Open</a>
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>
  <!-- Example Data Table end -->
   <div class="container row justify-content-center mt-1">
    <div class="pagination w-auto">
      <span class="step-links">
        {% if messages.has_previous %}
          <a class="text-white py-1 px-3 rounded pagination-items" href="?page=1">&laquo; First</a>
          <a class="text-white py-1 px-3 rounded pagination-items" href="?page={{ messages.previous_page_number }}">Previous</a>
        {% endif %}
  
        <span class="current text-white py-1 px-3 rounded pagination-item me-1">
          Page {{ messages.number }} of {{ messages.paginator.num_pages }}
        </span>
  
        {% if messages.has_next %}
          <a class="text-white py-1 px-3 rounded pagination-items" href="?page={{ messages.next_page_number }}">Next</a>
          <a class="text-white py-1 px-3 rounded pagination-items" href="?page={{ messages.paginator.num_pages }}">Last &raquo;</a>
        {% endif %} 
      </span>
     </div>
    </div>
</div>
{% endblock content %}